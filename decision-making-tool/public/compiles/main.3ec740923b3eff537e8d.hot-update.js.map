{"version":3,"file":"main.3ec740923b3eff537e8d.hot-update.js","mappings":";;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AAWA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AAEA;AAGA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AAAA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AAEA;AACA;AACA;AAcA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AAgEA;;;;;;;;;AC9NA","sources":["webpack://decision-making-tool/./src/builders/wheel.ts","webpack://decision-making-tool/webpack/runtime/getFullHash"],"sourcesContent":["import { getFromLocalStorage, objData, title } from '..';\nimport { test } from '../sounds/test';\nimport { createAudio } from './createAudio';\nimport { loadOptions } from './loadOptions';\nimport { container, containerForOptions, create } from './mainBlock';\n\n// const path = require('path');\n\n// // Define a directory and a file name\n// const directory = 'sounds';\n// const fileName = 'sounds_win.mp3';\n\n// // Create a full path to the file\n// const filePath = path.join(__dirname, directory, fileName);\n\nexport function createChoosePage() {\n  containerForOptions.textContent = '';\n  container.textContent = '';\n\n  const canvas = document.createElement('canvas');\n  canvas.setAttribute('id', 'wheel');\n  canvas.setAttribute('width', '400');\n  canvas.setAttribute('height', '400');\n  containerForOptions.append(canvas);\n\n  const pointer = document.createElement('div');\n  pointer.setAttribute('id', 'pointer');\n  containerForOptions.append(pointer);\n\n  const startButton = document.createElement('button');\n  startButton.setAttribute('id', 'start');\n  startButton.textContent = 'Start';\n  containerForOptions.append(startButton);\n\n  const output = document.createElement('div');\n  output.setAttribute('id', 'selected-option');\n  containerForOptions.append(output);\n\n  const homeButton = document.createElement('button');\n  homeButton.setAttribute('id', 'homeButton');\n  homeButton.textContent = 'Home';\n  containerForOptions.append(homeButton);\n\n  homeButton.addEventListener('click', () => {\n    containerForOptions.textContent = '';\n    container.textContent = '';\n    localStorage.page = '0';\n    location.hash = 'main';\n\n    document.body.append(title);\n\n    create(title);\n\n    // export const containerForOptions = document.createElement('div');\n    containerForOptions.classList.add('containerForOptions');\n    title.append(containerForOptions);\n    loadOptions(objData);\n  });\n\n  let top = String(canvas.offsetTop + pointer.offsetHeight / 2);\n  let left = String(canvas.offsetLeft + canvas.offsetWidth / 2);\n  pointer.style.top = top + 'px';\n  pointer.style.left = left + 'px';\n\n  window.addEventListener('resize', () => {\n    top = String(canvas.offsetTop + pointer.offsetHeight / 2);\n    left = String(canvas.offsetLeft + canvas.offsetWidth / 2);\n    pointer.style.top = top + 'px';\n    pointer.style.left = left + 'px';\n  });\n\n  let options = getFromLocalStorage('dataFromInputs');\n\n  const ctx = canvas.getContext('2d');\n  const sections = Object.keys(options).filter(key => key.startsWith('#'));\n  const sectionValues = sections.map(key => parseInt(options[key], 10));\n  const sectionNames = sections.map(key => options[`option-${key}`]);\n  const total = sectionValues.reduce((sum, val) => sum + val, 0);\n  const angles = sectionValues.map(value => (value / total) * 2 * Math.PI);\n\n  let startAngle = 0;\n\n  function drawWheel() {\n    if (ctx) {\n      ctx.clearRect(0, 0, canvas.width, canvas.height);\n      const centerX = canvas.width / 2;\n      const centerY = canvas.height / 2;\n      const radius = Math.min(centerX, centerY) * 0.9;\n\n      sections.forEach((section, index) => {\n        ctx.beginPath();\n        ctx.moveTo(centerX, centerY);\n        ctx.arc(centerX, centerY, radius, startAngle, startAngle + angles[index]);\n        ctx.fillStyle = 'orange'; // Keep the same color for all variants\n        ctx.fill();\n        ctx.stroke();\n\n        // Add text labels to the sections\n        const midAngle = startAngle + angles[index] / 2;\n        const textX = centerX + Math.cos(midAngle) * (radius / 2);\n        const textY = centerY + Math.sin(midAngle) * (radius / 2);\n        ctx.fillStyle = 'black';\n        ctx.fillText(sectionNames[index], textX, textY);\n\n        startAngle += angles[index];\n      });\n    }\n  }\n\n  function spinWheel(duration: number) {\n    let start: number | null = null;\n    const totalDegree = Math.random() * 360 + 720; // Spin at least 720 degrees\n    const spinDuration = duration * 1000; // Convert to milliseconds\n\n    function animate(timestamp: number | null) {\n      if (!start) start = timestamp;\n      if (timestamp && start) {\n        const elapsed = timestamp - start;\n        const progress = Math.min(elapsed / spinDuration, 1);\n        const easeOutQuad = progress * (2 - progress); // Easing function\n\n        const angle = totalDegree * easeOutQuad;\n        startAngle = angle * (Math.PI / 180);\n\n        drawWheel();\n\n        if (progress < 1) {\n          requestAnimationFrame(animate);\n        }\n        // else {\n        //   const normalizedAngle = ((startAngle % (2 * Math.PI)) + 2 * Math.PI) % (2 * Math.PI); // Ensure angle is positive\n        //   const pointerAngle = (normalizedAngle + Math.PI / 2) % (2 * Math.PI); // Adjust the angle for pointer position\n        //   let cumulativeAngle = 0;\n        //   let idx;\n        //   for (idx = 0; idx < angles.length; idx++) {\n        //     cumulativeAngle += angles[idx];\n        //     if (pointerAngle < cumulativeAngle) {\n        //       break; // Found the section index\n        //     }\n        //   }\n        //   output.innerText = sectionNames[idx];\n        // }\n      }\n    }\n    requestAnimationFrame(animate);\n  }\n\n  startButton.addEventListener('click', () => {\n    spinWheel(3); // Spin for 3 seconds\n    homeButton.disabled = true;\n    window.setTimeout(() => {\n      homeButton.disabled = false;\n      createAudio('win', '../sounds/sounds_win.mp3');\n      test;\n    }, 3000);\n  });\n\n  // Initial drawing of the wheel\n  drawWheel();\n\n  // const sectionCount = Object.keys(options).filter(key => key.startsWith('option-')).length;\n  // const ctx = canvas.getContext('2d');\n\n  // const drawWheel = () => {\n  //   const angle = (2 * Math.PI) / sectionCount;\n  //   let startAngle = 0;\n\n  //   if (ctx) {\n  //     for (let i = 0; i < sectionCount; i++) {\n  //       ctx.beginPath();\n  //       ctx.moveTo(200, 200); // Center\n  //       ctx.arc(200, 200, 150, startAngle, startAngle + angle);\n  //       ctx.fillStyle = 'lightblue'; // Same color\n  //       ctx.fill();\n  //       ctx.stroke();\n  //       ctx.save();\n  //       ctx.translate(\n  //         200 + Math.cos(startAngle + angle / 2) * 100,\n  //         200 + Math.sin(startAngle + angle / 2) * 100,\n  //       );\n  //       ctx.rotate(startAngle + angle / 2);\n  //       ctx.fillStyle = 'black';\n  //       ctx.fillText(options[`option-#${i + 1}`] || `Section ${i + 1}`, -25, 0);\n  //       ctx.restore();\n  //       startAngle += angle;\n  //     }\n  //   }\n  // };\n\n  // drawWheel();\n\n  // startButton.addEventListener('click', () => {\n  //   const totalDuration = 3000; // Duration of spin in milliseconds\n  //   const spinCount = 5; // Spins\n  //   let start: number | null = null;\n  //   let degrees = 0;\n\n  //   function spinWheel(timestamp: number | null) {\n  //     if (!start) start = timestamp;\n  //     if (timestamp && start && ctx) {\n  //       const elapsed = timestamp - start;\n  //       if (elapsed < totalDuration) {\n  //         // Simple easing effect\n  //         degrees += spinCount * 360 + (elapsed / totalDuration) * 360;\n  //         ctx.clearRect(0, 0, canvas.width, canvas.height); // Clear the canvas\n  //         ctx.save(); // Save the current context\n  //         ctx.translate(200, 200); // Move to center\n  //         ctx.rotate((degrees * Math.PI) / 180); // Rotate\n  //         ctx.translate(-200, -200); // Move back\n  //         drawWheel(); // Draw the wheel\n  //         ctx.restore(); // Restore the context\n  //         requestAnimationFrame(spinWheel);\n  //       } else {\n  //         // Calculate the selected section\n  //         const selectedIndex = Math.floor(((degrees % 360) / 360) * sectionCount);\n  //         output.innerText = `Selected: ${options[`option-#${selectedIndex + 1}`]}`;\n  //       }\n  //     }\n  //   }\n\n  //   requestAnimationFrame(spinWheel);\n  // });\n}\n","__webpack_require__.h = () => (\"2a60e5fedd16d682faff\")"],"names":[],"sourceRoot":""}